{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{formatEther,BrowserProvider}from\"ethers\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function WalletDashboard(_ref){let{signer}=_ref;const[address,setAddress]=useState(\"\");const[walletBalance,setWalletBalance]=useState(\"0\");const[myGroups,setMyGroups]=useState([]);// Fetch wallet address and balance\nuseEffect(()=>{const fetchWalletInfo=async()=>{if(signer){const addr=await signer.getAddress();setAddress(addr);const provider=new BrowserProvider(window.ethereum);const balance=await provider.getBalance(addr);setWalletBalance(formatEther(balance));}};fetchWalletInfo();},[signer]);// Fetch all groups and filter for the logged-in user\nuseEffect(()=>{const fetchGroups=async()=>{try{const addr=await signer.getAddress();const res=await fetch(\"http://localhost:5000/api/groups\");const allGroups=await res.json();const filtered=allGroups.filter(group=>group.members.some(m=>m.address.toLowerCase()===addr.toLowerCase()));setMyGroups(filtered);}catch(err){console.error(\"Failed to load groups:\",err);}};if(signer)fetchGroups();},[signer]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83C\\uDF89 Welcome to Your Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1 text-muted\",children:\"Connected Wallet:\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"text-primary\",children:address}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-success fs-6\",children:[\"\\uD83D\\uDCB0 Wallet Balance: \",walletBalance,\" ETH\"]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header fw-semibold\",children:\"\\uD83D\\uDCC2 My Groups\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:myGroups.length>0?myGroups.map(group=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-2 border rounded\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-1\",children:group.groupName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small mb-1\",children:\"\\uD83D\\uDC65 Members:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"ps-3 mb-0\",children:group.members.map((m,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"small\",children:[m.name,\" (\",m.address.slice(0,6),\"...\",m.address.slice(-4),\")\"]},idx))})]},group.groupId)):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"You\\u2019re not part of any groups yet.\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header fw-semibold\",children:\"\\uD83D\\uDCCA Financial Overview\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No balances available yet.\"})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header fw-semibold\",children:\"\\uD83D\\uDD53 Recent Activity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No recent transactions yet.\"})})]})})})]});}","map":{"version":3,"names":["React","useEffect","useState","formatEther","BrowserProvider","jsx","_jsx","jsxs","_jsxs","WalletDashboard","_ref","signer","address","setAddress","walletBalance","setWalletBalance","myGroups","setMyGroups","fetchWalletInfo","addr","getAddress","provider","window","ethereum","balance","getBalance","fetchGroups","res","fetch","allGroups","json","filtered","filter","group","members","some","m","toLowerCase","err","console","error","className","children","length","map","groupName","idx","name","slice","groupId"],"sources":["C:/Users/katas/BlockChainProject/expense-splitter-dapp/src/views/WalletDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { formatEther, BrowserProvider } from \"ethers\";\r\n\r\nexport default function WalletDashboard({ signer }) {\r\n  const [address, setAddress] = useState(\"\");\r\n  const [walletBalance, setWalletBalance] = useState(\"0\");\r\n  const [myGroups, setMyGroups] = useState([]);\r\n\r\n  // Fetch wallet address and balance\r\n  useEffect(() => {\r\n    const fetchWalletInfo = async () => {\r\n      if (signer) {\r\n        const addr = await signer.getAddress();\r\n        setAddress(addr);\r\n\r\n        const provider = new BrowserProvider(window.ethereum);\r\n        const balance = await provider.getBalance(addr);\r\n        setWalletBalance(formatEther(balance));\r\n      }\r\n    };\r\n\r\n    fetchWalletInfo();\r\n  }, [signer]);\r\n\r\n  // Fetch all groups and filter for the logged-in user\r\n  useEffect(() => {\r\n    const fetchGroups = async () => {\r\n      try {\r\n        const addr = await signer.getAddress();\r\n        const res = await fetch(\"http://localhost:5000/api/groups\");\r\n        const allGroups = await res.json();\r\n\r\n        const filtered = allGroups.filter((group) =>\r\n          group.members.some((m) =>\r\n            m.address.toLowerCase() === addr.toLowerCase()\r\n          )\r\n        );\r\n\r\n        setMyGroups(filtered);\r\n      } catch (err) {\r\n        console.error(\"Failed to load groups:\", err);\r\n      }\r\n    };\r\n\r\n    if (signer) fetchGroups();\r\n  }, [signer]);\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      {/* Wallet Info */}\r\n      <div className=\"card mb-4\">\r\n        <div className=\"card-body text-center\">\r\n          <h4>ðŸŽ‰ Welcome to Your Dashboard</h4>\r\n          <p className=\"mb-1 text-muted\">Connected Wallet:</p>\r\n          <h6 className=\"text-primary\">{address}</h6>\r\n          <p className=\"mt-2\">\r\n            <span className=\"badge bg-success fs-6\">\r\n              ðŸ’° Wallet Balance: {walletBalance} ETH\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* My Groups and Placeholder for Balances */}\r\n      <div className=\"row\">\r\n        {/* My Groups */}\r\n        <div className=\"col-md-6 mb-4\">\r\n          <div className=\"card h-100\">\r\n            <div className=\"card-header fw-semibold\">ðŸ“‚ My Groups</div>\r\n            <div className=\"card-body\">\r\n              {myGroups.length > 0 ? (\r\n                myGroups.map((group) => (\r\n                  <div key={group.groupId} className=\"mb-3 p-2 border rounded\">\r\n                    <h6 className=\"mb-1\">{group.groupName}</h6>\r\n                    <p className=\"text-muted small mb-1\">ðŸ‘¥ Members:</p>\r\n                    <ul className=\"ps-3 mb-0\">\r\n                      {group.members.map((m, idx) => (\r\n                        <li key={idx} className=\"small\">\r\n                          {m.name} ({m.address.slice(0, 6)}...{m.address.slice(-4)})\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p className=\"text-muted\">Youâ€™re not part of any groups yet.</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Financial Overview (placeholder) */}\r\n        <div className=\"col-md-6 mb-4\">\r\n          <div className=\"card h-100\">\r\n            <div className=\"card-header fw-semibold\">ðŸ“Š Financial Overview</div>\r\n            <div className=\"card-body\">\r\n              <p className=\"text-muted\">No balances available yet.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent Activity (placeholder) */}\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12 mb-4\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header fw-semibold\">ðŸ•“ Recent Activity</div>\r\n            <div className=\"card-body\">\r\n              <p className=\"text-muted\">No recent transactions yet.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}